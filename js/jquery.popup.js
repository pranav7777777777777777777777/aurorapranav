!function(i){i(document).on("click",".briefPopUp",function(n){n.preventDefault();var o=i(this).attr("data-briefPopUp-id"),e=i(this).attr("data-formid");i("input.jqueryfornid").val(e),i("#"+o).reveal(i(this).data())}),i.fn.reveal=function(n){var o={animation:"fadeAndPop",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-briefPopUp-modal"},n=i.extend({},o,n);return this.each(function(){function o(){d=!1}function e(){d=!0}var a=i(this),t=parseInt(a.css("top")),s=a.height()+t,d=!1,c=i(".briefPopUp-background");console.log(a),0==c.length&&(c=i('<div class="briefPopUp-background" />').insertAfter(a)),a.bind("briefPopUp:open",function(){i("body").css("overflow","hidden"),c.unbind("click.modalEvent"),i("."+n.dismissmodalclass).unbind("click.modalEvent"),d||(e(),"fadeAndPop"==n.animation&&(a.css({top:i(document).scrollTop()-s,opacity:0,visibility:"visible"}),c.fadeIn(n.animationspeed/2),a.delay(n.animationspeed/2).animate({top:i(document).scrollTop()+t+"px",opacity:1},n.animationspeed,o())),"fade"==n.animation&&(a.css({opacity:0,visibility:"visible",top:i(document).scrollTop()+t}),c.fadeIn(n.animationspeed/2),a.delay(n.animationspeed/2).animate({opacity:1},n.animationspeed,o())),"none"==n.animation&&(a.css({visibility:"visible",top:i(document).scrollTop()+t}),c.css({display:"block"}),o())),a.unbind("briefPopUp:open")}),a.bind("briefPopUp:close",function(){i("body").css("overflow","initial"),i("input.modal-textinput").val(""),i("textarea.modal-textinput").val(""),d||(e(),"fadeAndPop"==n.animation&&(c.delay(n.animationspeed).fadeOut(n.animationspeed),a.animate({top:i(document).scrollTop()-s+"px",opacity:0},n.animationspeed/2,function(){a.css({top:t,opacity:1,visibility:"hidden"}),o()})),"fade"==n.animation&&(c.delay(n.animationspeed).fadeOut(n.animationspeed),a.animate({opacity:0},n.animationspeed,function(){a.css({opacity:1,visibility:"hidden",top:t}),o()})),"none"==n.animation&&(a.css({visibility:"hidden",top:t}),c.css({display:"none"}))),a.unbind("briefPopUp:close")}),a.trigger("briefPopUp:open");i("."+n.dismissmodalclass).bind("click.modalEvent",function(){a.trigger("briefPopUp:close")});n.closeonbackgroundclick&&(c.css({cursor:"pointer"}),c.bind("click.modalEvent",function(){a.trigger("briefPopUp:close")})),i("body").keyup(function(i){27===i.which&&a.trigger("briefPopUp:close")})})}}(jQuery);